# 媒体管理器 (Media Manager)

一个基于 Electron + React 的 Windows 媒体播放器和管理器，具有现代化的无边框界面设计。

## 功能特性

### 媒体管理

- 📁 **媒体库管理**：扫描文件夹，自动识别视频和图片
- 🏷️ **Tag 系统**：为视频/图片添加任意数量的标签
- 🔍 **标签搜索**：通过标签快速筛选媒体文件
- 📐 **分辨率显示**：在播放列表中显示媒体文件的宽高分辨率

### 播放功能

- ▶️ **视频播放**：支持主流视频格式（MP4、AVI、MKV、MOV 等）
- 🖼️ **图片查看**：支持 JPG、PNG、GIF、BMP、WebP 等格式
- 🎛️ **自定义控制条**：固定在底部的播放控制条，不随视频尺寸变化
  - 播放/暂停、进度条、音量控制
  - 全屏切换
- 🔄 **播放模式**：列表循环 / 单曲循环 / 随机播放

### 视频剪辑

- ✂️ **保留模式**：提取指定时间段的视频
- ✂️ **删除模式**：删除指定时间段的视频
- 📊 **进度显示**：实时显示剪辑进度

### 界面特性

- 🪟 **无边框窗口**：自定义深色标题栏，与程序主题一致
- 📌 **固定侧边栏**：播放列表默认固定，可手动取消固定
- 🎨 **现代化UI**：深色主题，Tailwind CSS 样式
- 💡 **悬停提示**：图标按钮鼠标悬浮时显示提示文字

### 快捷操作

- ⌨️ **键盘快捷键**：
  - `Ctrl + O` - 添加文件夹
  - `Ctrl + F` - 聚焦搜索框
  - `Space` - 播放/暂停
  - `← / →` - 后退/前进 5 秒
  - `Page Up / Page Down` - 上一个/下一个媒体
  - `Delete` - 删除选中媒体
  - `Ctrl + T` - 添加 Tag
  - `Esc` - 关闭弹窗
- 🖱️ **右键菜单**：在播放器区域右键可快速访问常用功能

## 技术栈

- **框架**：Electron 28
- **前端**：React 18 + TypeScript + Tailwind CSS
- **构建**：Vite 5
- **数据库**：SQLite (better-sqlite3)
- **视频处理**：FFmpeg

## 安装依赖

```bash
npm install
```

## 开发运行

```bash
# 启动开发服务器
npm run dev

# 或者先构建主进程再启动（修改主进程代码后需要）
npm run build:main
npm run dev
```

## 构建应用

```bash
# 构建生产版本
npm run build
```

构建后的文件位于 `release/` 目录。

## 项目结构

```
media-manager/
├── src/
│   ├── main/              # Electron 主进程
│   │   ├── db/            # 数据库管理
│   │   └── utils/         # 工具类
│   ├── renderer/          # React 渲染进程
│   │   ├── components/    # UI 组件
│   │   │   ├── MediaPlayer.tsx    # 播放器组件（带自定义控制条）
│   │   │   ├── MediaGrid.tsx      # 媒体列表组件
│   │   │   ├── Settings.tsx       # 设置对话框
│   │   │   └── SearchBar.tsx      # 搜索栏组件
│   │   └── hooks/         # 自定义 Hooks
│   └── shared/            # 共享类型定义
├── dist/                  # 编译输出
├── package.json
├── vite.config.ts
└── README.md
```

## 使用说明

### 基础操作

1. 点击"文件"菜单 → "添加文件夹"导入媒体
2. 在播放列表中点击媒体项播放视频或查看图片
3. 使用底部控制条控制播放（进度、音量、播放模式）
4. 使用搜索栏按标签筛选媒体

### 标签管理

1. 在播放器区域右键点击 → "编辑标签"
2. 输入标签名称（支持多个标签，用逗号分隔）
3. 在搜索栏输入标签进行筛选

### 视频剪辑

1. 播放视频时，在播放器区域右键点击 → "剪辑视频"
2. 选择保留片段或删除片段模式
3. 设置开始和结束时间
4. 选择输出目录，开始剪辑

### 播放列表管理

- 📌 **固定/取消固定**：点击侧边栏左上角的锁图标
- 📐 **调整宽度**：拖拽侧边栏右边缘调整宽度
- 🔄 **刷新**：点击刷新按钮重新扫描监控的文件夹

### 设置

点击标题栏的 "⚙️ 设置" 按钮打开设置对话框：

- **常规设置**：更改数据存储目录
- **监控文件夹**：管理自动刷新的文件夹列表
- **快捷键**：查看所有可用的键盘快捷键

## License

MIT
